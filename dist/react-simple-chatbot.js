!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("styled-components")):"function"==typeof define&&define.amd?define(["react","styled-components"],t):"object"==typeof exports?exports.ReactSimpleChatbot=t(require("react"),require("styled-components")):e.ReactSimpleChatbot=t(e.react,e["styled-components"])}("undefined"!=typeof self?self:this,(function(e,t){return(()=>{var n={33:e=>{var t=function(e,t){return{parse:function(e,t){var o=JSON.parse(e,a).map(i),s=o[0],c=t||n,u="object"==typeof s&&s?r(o,new Set,s,c):s;return c.call({"":u},"",u)},stringify:function(e,r,i){for(var a,s=new Map,c=[],u=[],l=r&&typeof r==typeof c?function(e,t){if(""===e||-1<r.indexOf(e))return t}:r||n,p=+o(s,c,l.call({"":e},"",e)),f=function(e,n){if(a)return a=!a,n;var r=l.call(this,e,n);switch(typeof r){case"object":if(null===r)return r;case t:return s.get(r)||o(s,c,r)}return r};p<c.length;p++)a=!0,u[p]=JSON.stringify(c[p],f,i);return"["+u.join(",")+"]"}};function n(e,t){return t}function r(t,n,o,i){return Object.keys(o).reduce((function(o,a){var s=o[a];if(s instanceof e){var c=t[s];"object"!=typeof c||n.has(c)?o[a]=i.call(o,a,c):(n.add(c),o[a]=i.call(o,a,r(t,n,c,i)))}else o[a]=i.call(o,a,s);return o}),o)}function o(t,n,r){var o=e(n.push(r)-1);return t.set(r,o),o}function i(t){return t instanceof e?e(t):t}function a(n,r){return typeof r===t?new e(r):r}}(String,"string");e.exports=t},703:(e,t,n)=>{"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},181:e=>{var t="abcdefghijklmnopqrstuvwxyz",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="0123456789",o="~!@#$%^&()_+-={}[];',";e.exports=function(e,i){e||(e=30),i||(i="aA0");var a="";i.split("").forEach((e=>{isNaN(parseInt(e))?/[a-z]/.test(e)?a+=t:/[A-Z]/.test(e)?a+=n:a+=o:a+=r}));for(var s="",c=0;c<e;c++)s+=a.charAt(Math.floor(Math.random()*a.length));return s}},156:t=>{"use strict";t.exports=e},608:e=>{"use strict";e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";o.r(i),o.d(i,{Loading:()=>j,default:()=>Wt});var e=o(156),t=o.n(e),n=o(697),r=o.n(n),a=o(181),s=o.n(a),c=o(608),u=o.n(c),l=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null};const p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=l(e);return"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(t,")")};var f,d,b,y;function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g,v,m,S=(0,c.keyframes)(f||(f=h(["\n  0% { opacity: .2; }\n  20% { opacity: 1; }\n  100% { opacity: .2; }\n"]))),x=(0,c.keyframes)(d||(d=h(["\n  100% { transform: scale(1); }\n"]))),w=(0,c.keyframes)(b||(b=h(["\n  25% { transform: rotate(-1deg); }\n  100% { transform: rotate(1deg); }\n"])));const O=u().span(g||(v=["\n  animation: "," 1.4s infinite both;\n  animation-delay: ",";\n"],m||(m=v.slice(0)),g=Object.freeze(Object.defineProperties(v,{raw:{value:Object.freeze(m)}}))),S,(function(e){return e.delay}));const j=function(){return t().createElement("span",{className:"rsc-loading"},t().createElement(O,{delay:"0s"},"."),t().createElement(O,{delay:".2s"},"."),t().createElement(O,{delay:".4s"},"."))};var k;var E=u().div(k||(k=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  background: #fff;\n  border-radius: 5px;\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\n  display: flex;\n  justify-content: center;\n  margin: 0 6px 10px 6px;\n  padding: 16px;\n"])));const P=E;function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(a,e);var n,r,o,i=N(a);function a(){var e;C(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return M(I(e=i.call.apply(i,[this].concat(r))),"state",{loading:!0}),M(I(e),"renderComponent",(function(){var n=e.props,r=n.step,o=n.steps,i=n.previousStep,a=n.triggerNextStep,s=r.component;return t().cloneElement(s,{step:r,steps:o,previousStep:i,triggerNextStep:a})})),e}return n=a,r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.speak,r=t.step,o=t.previousValue,i=t.triggerNextStep,a=r.delay,s=r.waitAction;setTimeout((function(){e.setState({loading:!1},(function(){s||r.rendered||i(),n(r,o)}))}),a)}},{key:"render",value:function(){var e=this.state.loading,n=this.props.style;return t().createElement(P,{className:"rsc-cs",style:n},e?t().createElement(j,null):this.renderComponent())}}],r&&q(n.prototype,r),o&&q(n,o),Object.defineProperty(n,"prototype",{writable:!1}),a}(e.Component);A.propTypes={previousStep:r().objectOf(r().any).isRequired,previousValue:r().oneOfType([r().string,r().bool,r().number,r().object,r().array]),speak:r().func,step:r().objectOf(r().any).isRequired,steps:r().objectOf(r().any).isRequired,style:r().objectOf(r().any).isRequired,triggerNextStep:r().func.isRequired},A.defaultProps={previousValue:"",speak:function(){}};const _=A;var F;var V=u().li(F||(F=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  animation: "," 0.3s ease forwards;\n  cursor: pointer;\n  display: inline-block;\n  margin: 2px;\n  transform: scale(0);\n"])),x);const D=V,L={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"};var U;var H=u().button(U||(U=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  background: ",";\n  border: 0;\n  border-radius: 22px;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\n  color: ",";\n  display: inline-block;\n  font-size: 14px;\n  padding: 12px;\n\n  &:hover {\n    opacity: 0.7;\n  }\n  &:active,\n  &:hover:focus {\n    outline:none;\n  }\n"])),(function(e){return e.theme.botBubbleColor}),(function(e){return e.theme.botFontColor}));H.defaultProps={theme:L};const K=H;var W;var J=u().ul(W||(W=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  margin: 2px 0 12px 0;\n  padding: 0 6px;\n"])));const Y=J;var $;var Z=u().div($||($=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""])));const G=Z;function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(a,e);var n,r,o,i=ne(a);function a(){var e;X(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return ae(oe(e=i.call.apply(i,[this].concat(r))),"onOptionClick",(function(t){var n=t.value;(0,e.props.triggerNextStep)({value:n})})),ae(oe(e),"renderOption",(function(n){var r=e.props,o=r.bubbleOptionStyle,i=r.step.user,a=n.value,s=n.label;return t().createElement(D,{key:a,className:"rsc-os-option"},t().createElement(K,{className:"rsc-os-option-element",style:o,user:i,onClick:function(){return e.onOptionClick({value:a})}},s))})),e}return n=a,(r=[{key:"render",value:function(){var e=this.props.step.options;return t().createElement(G,{className:"rsc-os"},t().createElement(Y,{className:"rsc-os-options"},Object.keys(e).map((function(t){return e[t]})).map(this.renderOption)))}}])&&ee(n.prototype,r),o&&ee(n,o),Object.defineProperty(n,"prototype",{writable:!1}),a}(e.Component);se.propTypes={bubbleOptionStyle:r().objectOf(r().any).isRequired,step:r().objectOf(r().any).isRequired,triggerNextStep:r().func.isRequired};const ce=se;var ue;var le=u().div(ue||(ue=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  animation: "," 0.3s ease forwards;\n  background: ",";\n  border-radius: ",";\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\n  color: ",";\n  display: inline-block;\n  font-size: 14px;\n  max-width: 50%;\n  margin: ",";\n  overflow: hidden;\n  position: relative;\n  padding: 12px;\n  transform: scale(0);\n  transform-origin: ",";\n"])),x,(function(e){return e.user?e.theme.userBubbleColor:e.theme.botBubbleColor}),(function(e){var t=e.isFirst,n=e.isLast,r=e.user;return t||n?!t&&n?r?"18px 0 18px 18px":"0 18px 18px 18px":e.user?"18px 18px 0 18px":"18px 18px 18px 0":r?"18px 0 0 18px":"0 18px 18px 0px"}),(function(e){return e.user?e.theme.userFontColor:e.theme.botFontColor}),(function(e){var t=e.isFirst,n=e.showAvatar,r=e.user;return!t&&n?r?"-8px 46px 10px 0":"-8px 0 10px 46px":t||n?"0 0 10px 0":r?"-8px 0px 10px 0":"-8px 0 10px 0px"}),(function(e){var t=e.isFirst,n=e.user;return t?n?"bottom right":"bottom left":n?"top right":"top left"}));le.defaultProps={theme:L};const pe=le;var fe;var de=u().img(fe||(fe=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  animation: "," 0.3s ease forwards;\n  border-radius: ",";\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\n  height: 40px;\n  min-width: 40px;\n  padding: 3px;\n  transform: scale(0);\n  transform-origin: ",";\n  width: 40;\n"])),x,(function(e){return e.user?"50% 50% 50% 0":"50% 50% 0 50%"}),(function(e){return e.user?"bottom left":"bottom right"}));const be=de;var ye;var he=u().div(ye||(ye=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: inline-block;\n  order: ",";\n  padding: 6px;\n"])),(function(e){return e.user?"1":"0"}));const ge=he;var ve;var me=u().div(ve||(ve=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  align-items: flex-end;\n  display: flex;\n  justify-content: ",";\n"])),(function(e){return e.user?"flex-end":"flex-start"}));const Se=me;function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},je(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ze(e);if(t){var o=ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pe(e)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(a,e);var n,r,o,i=ke(a);function a(){var e;we(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Ce(Pe(e=i.call.apply(i,[this].concat(r))),"state",{loading:!0}),Ce(Pe(e),"getMessage",(function(){var t=e.props,n=t.previousValue,r=t.step.message;return r?r.replace(/{previousValue}/g,n):""})),Ce(Pe(e),"renderMessage",(function(){var n=e.props,r=n.step,o=n.steps,i=n.previousStep,a=n.triggerNextStep,s=r.component;return s?t().cloneElement(s,{step:r,steps:o,previousStep:i,triggerNextStep:a}):e.getMessage()})),e}return n=a,r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.step,r=t.speak,o=t.previousValue,i=t.triggerNextStep,a=n.component,s=n.delay,c=n.waitAction,u=a&&c;setTimeout((function(){e.setState({loading:!1},(function(){u||n.rendered||i(),r(n,o)}))}),s)}},{key:"render",value:function(){var e=this.props,n=e.step,r=e.isFirst,o=e.isLast,i=e.avatarStyle,a=e.bubbleStyle,s=e.hideBotAvatar,c=e.hideUserAvatar,u=this.state.loading,l=n.avatar,p=n.user,f=n.botName,d=p?!c:!s,b=p?"Your avatar":"".concat(f,"'s avatar");return t().createElement(Se,{className:"rsc-ts ".concat(p?"rsc-ts-user":"rsc-ts-bot"),user:p},t().createElement(ge,{className:"rsc-ts-image-container",user:p},r&&d&&t().createElement(be,{className:"rsc-ts-image",style:i,showAvatar:d,user:p,src:l,alt:b})),t().createElement(pe,{className:"rsc-ts-bubble",style:a,user:p,showAvatar:d,isFirst:r,isLast:o},u?t().createElement(j,null):this.renderMessage()))}}],r&&Oe(n.prototype,r),o&&Oe(n,o),Object.defineProperty(n,"prototype",{writable:!1}),a}(e.Component);qe.propTypes={avatarStyle:r().objectOf(r().any).isRequired,isFirst:r().bool.isRequired,isLast:r().bool.isRequired,bubbleStyle:r().objectOf(r().any).isRequired,hideBotAvatar:r().bool.isRequired,hideUserAvatar:r().bool.isRequired,previousStep:r().objectOf(r().any),previousValue:r().oneOfType([r().string,r().bool,r().number,r().object,r().array]),speak:r().func,step:r().objectOf(r().any).isRequired,steps:r().objectOf(r().any),triggerNextStep:r().func.isRequired},qe.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};const Re=qe,Ne=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"hideExtraControl",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Be=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"hideExtraControl",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Ie=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"hideExtraControl",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Te=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"hideExtraControl",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Me=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}];var Ae=o(33);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}const Fe={parse:function(e){var t=[];if(e.user)t=Ne;else if(e.message)t=Be;else if(e.options)t=Ie;else if(e.component)t=Te;else{if(!e.update)throw new Error("The step ".concat((0,Ae.stringify)(e)," is invalid"));t=Me}for(var n=0,r=t.length;n<r;n+=1){var o=t[n],i=o.key,a=o.types,s=o.required;if(!e[i]&&s)throw new Error("Key '".concat(i,"' is required in step ").concat((0,Ae.stringify)(e)));if(e[i]&&"any"!==a[0]&&a.indexOf(_e(e[i]))<0)throw new Error("The type of '".concat(i,"' value must be ").concat(a.join(" or ")," instead of ").concat(_e(e[i])))}var c=t.map((function(e){return e.key}));for(var u in e)c.indexOf(u)<0&&(console.error("Invalid key '".concat(u,"' in step '").concat(e.id,"'")),delete e[u]);return e},checkInvalidIds:function(e){for(var t in e){var n=e[t],r=e[t].trigger;if("function"!=typeof r)if(n.options)for(var o=n.options.filter((function(e){return"function"!=typeof e.trigger})).map((function(e){return e.trigger})),i=0,a=o.length;i<a;i+=1){var s=o[i];if(s&&!e[s])throw new Error("The id '".concat(s,"' triggered by option ").concat(i+1," in step '").concat(e[t].id,"' does not exist"))}else if(r&&!e[r])throw new Error("The id '".concat(r,"' triggered by step '").concat(e[t].id,"' does not exist"))}}};var Ve;var De=u().div(Ve||(Ve=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  background: ",";\n  border-radius: 10px;\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\n  font-family: ",";\n  overflow: hidden;\n  position: ",";\n  bottom: ",";\n  top: ",";\n  right: ",";\n  left: ",";\n  width: ",";\n  height: ",";\n  z-index: 999;\n  transform: ",";\n  transform-origin: ",";\n  transition: transform 0.3s ease;\n\n  @media screen and (max-width: 568px) {\n    border-radius: ",";\n    bottom: 0 !important;\n    left: initial !important;\n    height: 100%;\n    right: 0 !important;\n    top: initial !important;\n    width: 100%;\n  }\n"])),(function(e){return e.theme.background}),(function(e){return e.theme.fontFamily}),(function(e){return e.floating?"fixed":"relative"}),(function(e){var t=e.floating,n=e.floatingStyle;return t?n.bottom||"32px":"initial"}),(function(e){var t=e.floating,n=e.floatingStyle;return t&&n.top||"initial"}),(function(e){var t=e.floating,n=e.floatingStyle;return t?n.right||"32px":"initial"}),(function(e){var t=e.floating,n=e.floatingStyle;return t&&n.left||"initial"}),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.opened?"scale(1)":"scale(0)"}),(function(e){return e.floatingStyle.transformOrigin||"bottom right"}),(function(e){return e.floating?"0":""}));De.defaultProps={theme:L};const Le=De;var Ue;var He=u().div(Ue||(Ue=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  height: calc("," - ",");\n  overflow-y: scroll;\n  margin-top: 2px;\n  padding-top: 6px;\n\n  @media screen and (max-width: 568px) {\n    height: ",";\n  }\n"])),(function(e){return e.height}),(function(e){return e.hideInput?"56px":"112px"}),(function(e){return e.floating?"calc(100% - 112px)":""}));const Ke=He;var We;var Je=u().div(We||(We=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  align-items: center;\n  background: ",";\n  color: ",";\n  display: flex;\n  fill: ",";\n  height: 56px;\n  justify-content: space-between;\n  padding: 0 10px;\n"])),(function(e){return e.theme.headerBgColor}),(function(e){return e.theme.headerFontColor}),(function(e){return e.theme.headerFontColor}));Je.defaultProps={theme:L};const Ye=Je;var $e;var Ze=u().h2($e||($e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  margin: 0;\n  font-size: ",";\n"])),(function(e){return e.theme.headerFontSize}));Ze.defaultProps={theme:L};const Ge=Ze;var Qe;var Xe=u().a(Qe||(Qe=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  cursor: pointer;\n"])));const et=Xe;var tt;var nt=u().a(tt||(tt=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  align-items: center;\n  cursor: pointer;\n  background: ",";\n  bottom: 32px;\n  border-radius: 100%;\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\n  display: flex;\n  fill: ",";\n  height: 56px;\n  justify-content: center;\n  position: fixed;\n  right: 32px;\n  transform: ",";\n  transition: transform 0.3s ease;\n  width: 56px;\n  z-index: 999;\n"])),(function(e){return e.theme.headerBgColor}),(function(e){return e.theme.headerFontColor}),(function(e){return e.opened?"scale(0)":"scale(1)"}));nt.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};const rt=nt;var ot;var it=u().img(ot||(ot=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  height: 24px;\n  width: 24px;\n"])));const at=it;var st;var ct=u().div(st||(st=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  position: relative;\n"])));const ut=ct;var lt,pt;function ft(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const dt=u().input(lt||(lt=ft(["\n  animation: ",";\n  border: 0;\n  border-radius: 0;\n  border-bottom-left-radius: 10px;\n  border-bottom-right-radius: 10px;\n  border-top: ",";\n  box-shadow: ",";\n  box-sizing: border-box;\n  color: ",";\n  font-size: 16px;\n  opacity: ",";\n  outline: none;\n  padding: ",";\n  width: 100%;\n  -webkit-appearance: none;\n\n  &:disabled {\n    background: #fff;\n  }\n\n  @media screen and (max-width: 568px) {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n"])),(function(e){return e.invalid?(0,c.css)(pt||(pt=ft(["\n          "," .2s ease\n        "])),w):""}),(function(e){return e.invalid?"0":"1px solid #eee"}),(function(e){return e.invalid?"inset 0 0 2px #E53935":"none"}),(function(e){return e.invalid?"#E53935":""}),(function(e){return e.disabled&&!e.invalid?".5":"1"}),(function(e){return e.hasButton?"16px 52px 16px 10px":"16px 10px"}),(function(e){return e.floating?"0":"10px"}),(function(e){return e.floating?"0":"10px"}));var bt,yt;function ht(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var gt=u().button(bt||(bt=ht(["\n  background-color: transparent;\n  border: 0;\n  border-bottom-right-radius: 10px;\n  box-shadow: none;\n  cursor: ",";\n  fill: ",";\n  opacity: ",";\n  outline: none;\n  padding: 14px 16px 12px 16px;\n  &:before {\n    content: '';\n    position: absolute;\n    width: 23px;\n    height: 23px;\n    border-radius: 50%;\n    animation: ",";\n  }\n  &:not(:disabled):hover {\n    opacity: 0.7;\n  }\n"])),(function(e){return e.disabled?"default":"pointer"}),(function(e){var t=e.speaking,n=e.invalid,r=e.theme;return t?r.headerBgColor:n?"#E53935":"#4a4a4a"}),(function(e){return e.disabled&&!e.invalid?".5":"1"}),(function(e){var t,n=e.theme;return e.speaking?(0,c.css)(yt||(yt=ht(["\n            "," 2s ease infinite\n          "])),(t=n.headerBgColor,(0,c.keyframes)(y||(y=h(["\n  0% { box-shadow: 0 0 0 0 ","; }\n  70% { box-shadow: 0 0 0 10px ","; }\n  100% { box-shadow: 0 0 0 0 ","; }\n"])),p(t,.4),p(t,0),p(t,0)))):""}));gt.defaultProps={theme:L};const vt=gt;function mt(){return mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=null,Ot=function(){},jt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en";return St(this,e),wt||(wt=this),this.state={inputValue:"",lang:o,onChange:t,onEnd:n,onStop:r},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),wt}var t,n,r;return t=e,r=[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}],(n=[{key:"onChange",value:function(e){var t=this.state.onChange;this.setState({inputValue:e}),t(e)}},{key:"onFinal",value:function(e){this.setState({inputValue:e}),this.recognition.stop()}},{key:"onEnd",value:function(){var e=this.state,t=e.onStop,n=e.onEnd,r=e.force;this.setState({speaking:!1}),r?t():n()}},{key:"onResult",value:function(e){for(var t="",n="",r=e.resultIndex;r<e.results.length;r+=1)e.results[r].isFinal?(n+=e.results[r][0].transcript,this.onFinal(n)):(t+=e.results[r][0].transcript,this.onChange(t))}},{key:"setState",value:function(e){this.state=mt({},this.state,e)}},{key:"setup",value:function(){if(!e.isSupported())return this;var t=window.webkitSpeechRecognition;return this.recognition=new t,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(e){return this.setState({lang:e}),this.setup(),this}},{key:"speak",value:function(){return e.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}])&&xt(t.prototype,n),r&&xt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const kt=function(){return t().createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},t().createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),t().createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))};const Et=function(){return t().createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},t().createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),t().createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))};var Pt=function(e){var n=e.size;return t().createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 500 500"},t().createElement("g",null,t().createElement("g",null,t().createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};Pt.propTypes={size:r().number},Pt.defaultProps={size:20};const zt=Pt;var Ct=function(e){var n=e.size;return t().createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 400 400"},t().createElement("g",null,t().createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),t().createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};Ct.propTypes={size:r().number},Ct.defaultProps={size:20};const qt=Ct;var Rt=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},Nt=function(e){return"string"==typeof e},Bt=function(e){return function(t,n){var r=e.lang,o=e.voice,i=e.enable,a=t.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!a&&i){var s=function(e){var t=e.message,n=e.metadata,r=void 0===n?{}:n;return Nt(r.speak)?r.speak:Nt(t)?t:""}(t),c=new window.SpeechSynthesisUtterance;c.text=s.replace(/{previousValue}/g,n),c.lang=r,c.voice=o,window.speechSynthesis.speak(c)}}};function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Tt(){return Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t){return Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ft(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ut(e);if(t){var o=Ut(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Dt(this,n)}}function Dt(e,t){if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lt(e)}function Lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ut(e)}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ft(e,t)}(a,e);var n,r,o,i=Vt(a);function a(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Ht(Lt(n=i.call(this,e)),"onNodeInserted",(function(e){var t=e.currentTarget;n.props.enableSmoothScroll&&n.supportsScrollBehavior?t.scroll({top:t.scrollHeight,left:0,behavior:"smooth"}):t.scrollTop=t.scrollHeight})),Ht(Lt(n),"onResize",(function(){n.content.scrollTop=n.content.scrollHeight})),Ht(Lt(n),"onRecognitionChange",(function(e){n.setState({inputValue:e})})),Ht(Lt(n),"onRecognitionEnd",(function(){n.setState({speaking:!1}),n.handleSubmitButton()})),Ht(Lt(n),"onRecognitionStop",(function(){n.setState({speaking:!1})})),Ht(Lt(n),"onValueChange",(function(e){n.setState({inputValue:e.target.value})})),Ht(Lt(n),"getTriggeredStep",(function(e,t){var r=n.generateRenderedStepsById();return"function"==typeof e?e({value:t,steps:r}):e})),Ht(Lt(n),"getStepMessage",(function(e){var t=n.state.previousSteps,r=t.length>0?t.length-1:0,o=n.generateRenderedStepsById(),i=t[r].value;return"function"==typeof e?e({previousValue:i,steps:o}):e})),Ht(Lt(n),"generateRenderedStepsById",(function(){for(var e=n.state.previousSteps,t={},r=0,o=e.length;r<o;r+=1){var i=e[r],a=i.id,s=i.message,c=i.value,u=i.metadata;t[a]={id:a,message:s,value:c,metadata:u}}return t})),Ht(Lt(n),"triggerNextStep",(function(e){var t=n.props.enableMobileAutoFocus,r=n.state,o=r.defaultUserSettings,i=r.previousSteps,a=r.renderedSteps,c=r.steps,u=n.state,l=u.currentStep,p=u.previousStep,f=l.end;if(e&&e.value&&(l.value=e.value),e&&e.hideInput&&(l.hideInput=e.hideInput),e&&e.hideExtraControl&&(l.hideExtraControl=e.hideExtraControl),e&&e.trigger&&(l.trigger=n.getTriggeredStep(e.trigger,e.value)),f)n.handleEnd();else if(l.options&&e){var d=l.options.filter((function(t){return t.value===e.value}))[0],b=n.getTriggeredStep(d.trigger,l.value);delete l.options,l=At(At(At(At({},l),d),o),{},{user:!0,message:d.label,trigger:b}),a.pop(),i.pop(),a.push(l),i.push(l),n.setState({currentStep:l,renderedSteps:a,previousSteps:i})}else if(l.trigger){l.replace&&a.pop();var y=At({},c[n.getTriggeredStep(l.trigger,l.value)]);if(y.message)y.message=n.getStepMessage(y.message);else if(y.update){var h=y;if((y=At({},c[h.update])).options)for(var g=0,v=y.options.length;g<v;g+=1)y.options[g].trigger=h.trigger;else y.trigger=h.trigger}y.key=s()(24),p=l,l=y,n.setState({renderedSteps:a,currentStep:l,previousStep:p},(function(){y.user?n.setState({disabled:!1},(function(){!t&&Rt()||n.input&&n.input.focus()})):(a.push(y),i.push(y),n.setState({renderedSteps:a,previousSteps:i}))}))}var m=n.props,S=m.cache,x=m.cacheName;S&&setTimeout((function(){!function(e,t){var n=(0,Ae.parse)((0,Ae.stringify)(t));for(var r in n)for(var o=0,i=n[r].length;o<i;o+=1)n[r][o].component&&(n[r][o].component=n[r][o].id);localStorage.setItem(e,(0,Ae.stringify)(n))}(x,{currentStep:l,previousStep:p,previousSteps:i,renderedSteps:a})}),300)})),Ht(Lt(n),"handleEnd",(function(){var e=n.props.handleEnd;if(e){for(var t=n.state.previousSteps,r=t.map((function(e){return{id:e.id,message:e.message,value:e.value,metadata:e.metadata}})),o=[],i=0,a=t.length;i<a;i+=1){var s=t[i],c=s.id,u=s.message,l=s.value,p=s.metadata;o[c]={id:c,message:u,value:l,metadata:p}}e({renderedSteps:r,steps:o,values:t.filter((function(e){return e.value})).map((function(e){return e.value}))})}})),Ht(Lt(n),"isInputValueEmpty",(function(){var e=n.state.inputValue;return!e||0===e.length})),Ht(Lt(n),"isLastPosition",(function(e){var t=n.state.renderedSteps,r=t.length,o=t.map((function(e){return e.key})).indexOf(e.key);if(r<=1||o+1===r)return!0;var i=t[o+1];return!i.message&&!i.asMessage||e.user!==i.user})),Ht(Lt(n),"isFirstPosition",(function(e){var t=n.state.renderedSteps,r=t.map((function(e){return e.key})).indexOf(e.key);if(0===r)return!0;var o=t[r-1];return!o.message&&!o.asMessage||e.user!==o.user})),Ht(Lt(n),"handleKeyPress",(function(e){"Enter"===e.key&&n.submitUserMessage()})),Ht(Lt(n),"handleSubmitButton",(function(){var e=n.state,t=e.speaking,r=e.recognitionEnable;if((n.isInputValueEmpty()||t)&&r)return n.recognition.speak(),void(t||n.setState({speaking:!0}));n.submitUserMessage()})),Ht(Lt(n),"submitUserMessage",(function(){var e=n.state,t=e.defaultUserSettings,r=e.inputValue,o=e.previousSteps,i=e.renderedSteps,a=n.state.currentStep;if(!(a.validator&&n.checkInvalidInput())){var s={message:r,value:r};a=At(At(At({},t),a),s),i.push(a),o.push(a),n.setState({currentStep:a,renderedSteps:i,previousSteps:o,disabled:!0,inputValue:""},(function(){n.input&&n.input.blur()}))}})),Ht(Lt(n),"checkInvalidInput",(function(){var e=n.props.enableMobileAutoFocus,t=n.state,r=t.currentStep,o=t.inputValue,i=r.validator(o),a=o;return("boolean"!=typeof i||!i)&&(n.setState({inputValue:i.toString(),inputInvalid:!0,disabled:!0},(function(){setTimeout((function(){n.setState({inputValue:a,inputInvalid:!1,disabled:!1},(function(){!e&&Rt()||n.input&&n.input.focus()}))}),2e3)})),!0)})),Ht(Lt(n),"toggleChatBot",(function(e){var t=n.props.toggleFloating;t?t({opened:e}):n.setState({opened:e})})),Ht(Lt(n),"renderStep",(function(e,r){var o=n.state.renderedSteps,i=n.props,a=i.avatarStyle,s=i.bubbleStyle,c=i.bubbleOptionStyle,u=i.customStyle,l=i.hideBotAvatar,p=i.hideUserAvatar,f=i.speechSynthesis,d=e.options,b=e.component,y=e.asMessage,h=n.generateRenderedStepsById(),g=r>0?o[r-1]:{};return b&&!y?t().createElement(_,{key:r,speak:n.speak,step:e,steps:h,style:u,previousStep:g,previousValue:g.value,triggerNextStep:n.triggerNextStep}):d?t().createElement(ce,{key:r,step:e,previousValue:g.value,triggerNextStep:n.triggerNextStep,bubbleOptionStyle:c}):t().createElement(Re,{key:r,step:e,steps:h,speak:n.speak,previousStep:g,previousValue:g.value,triggerNextStep:n.triggerNextStep,avatarStyle:a,bubbleStyle:s,hideBotAvatar:l,hideUserAvatar:p,speechSynthesis:f,isFirst:n.isFirstPosition(e),isLast:n.isLastPosition(e)})})),n.content=null,n.input=null,n.supportsScrollBehavior=!1,n.setContentRef=function(e){n.content=e},n.setInputRef=function(e){n.input=e},n.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:e.opened||!e.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:e.recognitionEnable&&jt.isSupported(),defaultUserSettings:{}},n.speak=Bt(e.speechSynthesis),n}return n=a,o=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.opened;return void 0!==e.toggleFloating&&void 0!==n&&n!==t.opened?At(At({},t),{},{opened:n}):t}}],(r=[{key:"componentDidMount",value:function(){for(var e=this,t=this.props.steps,n=this.props,r=n.botDelay,o=n.botAvatar,i=n.botName,a=n.cache,s=n.cacheName,c=n.customDelay,u=n.enableMobileAutoFocus,l=n.userAvatar,p={},f={delay:r,avatar:o,botName:i},d={delay:n.userDelay,avatar:l,hideInput:!1,hideExtraControl:!1},b={delay:c},y=0,h=t.length;y<h;y+=1){var g=t[y],v={};g.user?v=d:g.message||g.asMessage?v=f:g.component&&(v=b),p[g.id]=At(At({},v),Fe.parse(g))}Fe.checkInvalidIds(p);var m=t[0];if(m.message){var S=m.message;m.message="function"==typeof S?S():S,p[m.id].message=m.message}var x=this.state.recognitionEnable,w=this.props.recognitionLang;x&&(this.recognition=new jt(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,w)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var O=function(e,t){var n=e.cacheName,r=e.cache,o=e.firstStep,i=e.steps,a=o,s=[i[a.id]],c=[i[a.id]],u=localStorage.getItem(n);if(r&&u)try{var l=(0,Ae.parse)(u),p=l.renderedSteps[l.renderedSteps.length-1];if(!p||!p.end){for(var f=0,d=l.renderedSteps.length;f<d;f+=1){var b=l.renderedSteps[f];if(l.renderedSteps[f].delay=0,l.renderedSteps[f].rendered=!0,b.component){var y=b.id;l.renderedSteps[f].component=i[y].component}}var h=l.currentStep,g=h.trigger,v=h.end,m=h.options,S=l.currentStep.id;if(m&&delete l.currentStep.rendered,!g&&!v)if(m)for(var x=0;x<m.length;x+=1)l.currentStep.options[x].trigger=i[S].options[x].trigger;else l.currentStep.trigger=i[S].trigger;return l.currentStep.user&&t(),l}localStorage.removeItem(n)}catch(e){console.info("Unable to parse cache named:".concat(n,". \nThe cache where probably created with an older version of react-simple-chatbot.\n"),e)}return{currentStep:a,previousStep:{},previousSteps:c,renderedSteps:s}}({cacheName:s,cache:a,firstStep:m,steps:p},(function(){e.setState({disabled:!1},(function(){!u&&Rt()||e.input&&e.input.focus()}))})),j=O.currentStep,k=O.previousStep,E=O.previousSteps,P=O.renderedSteps;this.setState({currentStep:j,defaultUserSettings:d,previousStep:k,previousSteps:E,renderedSteps:P,steps:p})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var e,n=this,r=this.state,o=r.currentStep,i=r.disabled,a=r.inputInvalid,s=r.inputValue,c=r.opened,u=r.renderedSteps,l=r.speaking,p=r.recognitionEnable,f=this.props,d=f.className,b=f.contentStyle,y=f.extraControl,h=f.controlStyle,g=f.floating,v=f.floatingIcon,m=f.floatingStyle,S=f.footerStyle,x=f.headerComponent,w=f.headerTitle,O=f.hideHeader,j=f.hideSubmitButton,k=f.inputStyle,E=f.placeholder,P=f.inputAttributes,z=f.recognitionPlaceholder,C=f.style,q=f.submitButtonStyle,R=f.width,N=f.height,B=x||t().createElement(Ye,{className:"rsc-header"},t().createElement(Ge,{className:"rsc-header-title"},w),g&&t().createElement(et,{className:"rsc-header-close-button",onClick:function(){return n.toggleChatBot(!1)}},t().createElement(Et,null)));void 0!==y&&(e=t().cloneElement(y,{disabled:i,speaking:l,invalid:a}));var I=(this.isInputValueEmpty()||l)&&p?t().createElement(qt,null):t().createElement(zt,null),T=l?z:o.placeholder||E,M=o.inputAttributes||P;return t().createElement("div",{className:"rsc ".concat(d)},g&&t().createElement(rt,{className:"rsc-float-button",style:m,opened:c,onClick:function(){return n.toggleChatBot(!0)}},"string"==typeof v?t().createElement(at,{src:v}):v),t().createElement(Le,{className:"rsc-container",floating:g,floatingStyle:m,opened:c,style:C,width:R,height:N},!O&&B,t().createElement(Ke,{className:"rsc-content",ref:this.setContentRef,floating:g,style:b,height:N,hideInput:o.hideInput},u.map(this.renderStep)),t().createElement(ut,{className:"rsc-footer",style:S},!o.hideInput&&t().createElement(dt,Tt({type:"textarea",style:k,ref:this.setInputRef,className:"rsc-input",placeholder:a?"":T,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:s,floating:g,invalid:a,disabled:i,hasButton:!j},M)),t().createElement("div",{style:h,className:"rsc-controls"},!o.hideInput&&!o.hideExtraControl&&e,!o.hideInput&&!j&&t().createElement(vt,{className:"rsc-submit-button",style:q,onClick:this.handleSubmitButton,invalid:a,disabled:i,speaking:l},I)))))}}])&&_t(n.prototype,r),o&&_t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),a}(e.Component);Kt.propTypes={avatarStyle:r().objectOf(r().any),botAvatar:r().string,botName:r().string,botDelay:r().number,bubbleOptionStyle:r().objectOf(r().any),bubbleStyle:r().objectOf(r().any),cache:r().bool,cacheName:r().string,className:r().string,contentStyle:r().objectOf(r().any),customDelay:r().number,customStyle:r().objectOf(r().any),controlStyle:r().objectOf(r().any),enableMobileAutoFocus:r().bool,enableSmoothScroll:r().bool,extraControl:r().objectOf(r().element),floating:r().bool,floatingIcon:r().oneOfType([r().string,r().element]),floatingStyle:r().objectOf(r().any),footerStyle:r().objectOf(r().any),handleEnd:r().func,headerComponent:r().element,headerTitle:r().string,height:r().string,hideBotAvatar:r().bool,hideHeader:r().bool,hideSubmitButton:r().bool,hideUserAvatar:r().bool,inputAttributes:r().objectOf(r().any),inputStyle:r().objectOf(r().any),opened:r().bool,toggleFloating:r().func,placeholder:r().string,recognitionEnable:r().bool,recognitionLang:r().string,recognitionPlaceholder:r().string,speechSynthesis:r().shape({enable:r().bool,lang:r().string,voice:"undefined"!=typeof window?r().instanceOf(window.SpeechSynthesisVoice):r().any}),steps:r().arrayOf(r().object).isRequired,style:r().objectOf(r().any),submitButtonStyle:r().objectOf(r().any),userAvatar:r().string,userDelay:r().number,width:r().string},Kt.defaultProps={avatarStyle:{},botDelay:1e3,botName:"The bot",bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},controlStyle:{position:"absolute",right:"0",top:"0"},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,extraControl:void 0,floating:!1,floatingIcon:t().createElement(kt,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};const Wt=Kt})(),i})()}));
//# sourceMappingURL=react-simple-chatbot.js.map